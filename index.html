<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>宝くじで億万長者シミュレーター</title>
  <meta name="description" content="スマホで宝くじ気分！億万長者になれるか？">
  <meta property="og:title" content="宝くじで億万長者シミュレーター" />
  <meta property="og:description" content="所持金が減るリアル感！あなたの運命を試そう。" />
  <meta property="og:image" content="https://kkp-15.github.io/ninja-takarakuji-sim/images/ogp.png" />
  <meta property="og:url" content="https://kkp-15.github.io/ninja-takarakuji-sim/" />
  <meta name="twitter:card" content="summary_large_image" />
  <style>
    body {
      font-family: 'Hiragino Kaku Gothic ProN', sans-serif;
      background: #fff8e1;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 10px;
    }
    #money {
      font-size: 1.5rem;
      margin: 10px 0;
    }
    button {
      padding: 15px 25px;
      font-size: 1.2rem;
      margin: 10px;
      border: none;
      border-radius: 8px;
      background-color: #ff9800;
      color: white;
      cursor: pointer;
    }
    button:disabled {
      background-color: #ccc;
      cursor: wait;
    }
    #result {
      margin-top: 20px;
      font-size: 1.2rem;
      white-space: pre-wrap;
    }
    .ad-msg {
      font-size: 1rem;
      color: #444;
      margin-top: 15px;
      line-height: 1.6;
    }
    #share {
      margin-top: 30px;
    }
    #share a {
      text-decoration: none;
      color: white;
      background: #1da1f2;
      padding: 10px 20px;
      border-radius: 6px;
      display: inline-block;
    }
  </style>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2LM85GJN0L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-2LM85GJN0L');
  </script>
</head>
<body>
  <h1>宝くじで億万長者シミュレーター</h1>
  <div id="money">所持金：10,000円</div>

  <p>何枚買う？</p>
  <button onclick="buyLottery(1)">1枚（1,000円）</button>
  <button onclick="buyLottery(5)">5枚（5,000円）</button>
  <button onclick="buyLottery(10)">10枚（10,000円）</button>

  <button onclick="watchAd()" id="adBtn">広告を見る（無料）</button>

  <div id="result"></div>
  <div class="ad-msg" id="ad"></div>

  <div id="share">
    <a href="#" id="tweetBtn" target="_blank">結果をXでシェアする</a>
  </div>

  <script>
    let money = 10000;
    let totalSpent = 0;
    let totalWon = 0;

    const moneyDisplay = document.getElementById("money");
    const resultDisplay = document.getElementById("result");
    const adDisplay = document.getElementById("ad");
    const tweetBtn = document.getElementById("tweetBtn");
    const adBtn = document.getElementById("adBtn");

    function buyLottery(count) {
      const cost = count * 1000;
      if (money < cost) {
        resultDisplay.textContent = "所持金が足りません。";
        return;
      }

      money -= cost;
      totalSpent += cost;
      let sessionResult = [];
      let sessionWin = 0;

      for (let i = 0; i < count; i++) {
        const rand = Math.random();
        let prize = 0;
        if (rand < 0.000001) prize = 1000000000;
        else if (rand < 0.0001) prize = 10000000;
        else if (rand < 0.001) prize = 1000000;
        else if (rand < 0.01) prize = 10000;
        else if (rand < 0.05) prize = 3000;

        if (prize > 0) {
          sessionResult.push(`🎉 ${i + 1}枚目：${prize.toLocaleString()}円当選！`);
        } else {
          sessionResult.push(`😢 ${i + 1}枚目：ハズレ`);
        }

        sessionWin += prize;
      }

      money += sessionWin;
      totalWon += sessionWin;

      const profit = sessionWin - cost;
      const totalProfit = totalWon - totalSpent;

      const resultText = `🎟 宝くじ ${count}枚購入！\n` +
                         sessionResult.join("\n") +
                         `\n\n💰 今回の損益：${profit >= 0 ? '+' : ''}${profit.toLocaleString()}円` +
                         `\n📊 累計損益：${totalProfit >= 0 ? '+' : ''}${totalProfit.toLocaleString()}円`;

      resultDisplay.textContent = resultText;
      moneyDisplay.textContent = `所持金：${money.toLocaleString()}円`;

      const tweetText = encodeURIComponent(`【宝くじシミュレーター🎯】\n${resultText}\n#宝くじシミュレーター`);
      tweetBtn.href = `https://twitter.com/intent/tweet?text=${tweetText}&url=https://kkp-15.github.io/ninja-takarakuji-sim/`;
    }

    function watchAd() {
      adBtn.disabled = true;
      adBtn.textContent = "広告再生中…";

      const wait = Math.floor(Math.random() * 3) + 1;
      const bonus = Math.floor(Math.random() * 5 + 1) * 100;
      const messages = [
        "⌛使った時間は戻らない…でも広告は何度も出てくる。",
        "😇あなたの5秒、他人の利益になりました。",
        "💭“時間はお金より大切”って誰かが言ってたような。",
        "📺この広告、人生で何回見たか覚えてますか？",
        "🌀何も得なかった…はずなのに、なぜかまた押してしまう。",
        "⏳今の数秒で、夢は少し遠のいたかも。",
        "🤖気づけば指が勝手に…時間が溶けるとはこのことか。",
        "🥲“無駄な時間”の定義が少しわかった気がする。",
        "📉秒単位で人生を浪費していく感覚、クセになりそう。",
        "💸お金は増えたけど、君の人生残り時間は減ったぞ。"
      ];

      setTimeout(() => {
        money += bonus;
        const randomMsg = messages[Math.floor(Math.random() * messages.length)];
        adDisplay.innerHTML = `🌀 広告を見て ${wait}秒が溶けました<br>💰 ${bonus.toLocaleString()}円もらえた！<br>${randomMsg}`;
        moneyDisplay.textContent = `所持金：${money.toLocaleString()}円`;
        adBtn.disabled = false;
        adBtn.textContent = "広告を見る（無料）";
      }, wait * 1000);
    }
  </script>
</body>
</html>
